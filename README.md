# 편의점 🏠💸

안녕하세요! 저희 편의점에 오신 것을 환영합니다.<br>
편의점에 입장하시기에 앞서, 저희 편의점의 규칙에 대해 알려드리려고 합니다.<br>

가장 먼저, 입장하시게 되면 저희 편의점에서 갖고 있는 상품들의 이름, 가격, 수량과 프로모션 정보를 확인하실 수 있습니다.<br>
이후에 구매하고자 하시는 상품명을 [상품명-수량]의 형태로 입력하시면 됩니다. 여러개를 입력하고 싶으시다면 [상품명-수량],[상품명-수량] 이렇게 쉼표(,) 로 연결해 입력해주시면 됩니다.<br>
위와 같은 형태로 입력하지 않으시는 경우, 저희는 다시 주문을 받게 될 것입니다. 정확히 입력해주세요! 🙏🏻<br>
입력값이 [ 로 시작하지 않거나 ] 로 끝나지 않는 경우, 상품명이 한글이 아닌 다른 문자가 포함되거나 수량이 정수가 아닌 경우에는 다시 입력을 요구할 것입니다!<br>
<br>
존재하지 않는 상품명에 대한 주문은 받지 않습니다. 또한, 프로모션 수량과 기본 수량을 합친 것보다도 더 많은 수량을 요구하시는 경우에도 다시 주문을 받을 것입니다.<br>
이후에는 프로모션 정책에 따라 무료로 받을 수 있는 개수에 대해 알려드릴 것입니다. ```현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)``` 이렇게 여쭤볼 것입니다.<br>
저희 가게에서는 다음과 같은 규칙을 따릅니다. 가령, 콜라가 2+1 할인 행사를 하고 있다고 가정해봅시다.<br><br>

- 콜라를 2개 산 경우 : 1개 증정 받을 것인지 의사를 물어봄
- 콜라를 4개 산 경우 : 1개는 공짜로 결제되고, 1개를 추가적으로 증정 받을 것인지 의사를 물어봄
- 콜라를 6개 산 경우 : 2개는 공짜로 결제되고, 추가 증정을 의사를 묻지 않음

만약, 추가적으로 증정 받지 않겠다고 하시는 경우에는 주문하신 수량 그대로 유지합니다. 예를 들어, 4개를 주문하시고 추가적으로 증정받지 않는 경우에는 1개를 공짜로 결제하고, 1개의 상품을 추가하지
않습니다.<br>
이 때, 프로모션 재고가 부족한 경우에는 할인 조건에 적용이 되더라도 수량 추가 의사를 여쭤보지 않을 것입니다!<br>

이후에는, 프로모션 조건에 적용이 되지만 주문 수량보다 프로모션 수량이 적은 경우에 ```현재 {상품명} {수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)``` 이렇게 여쭤볼
것입니다. <br>
만약 그래도 구매하겠다고 하신다면, 주문은 그대로 유지됩니다. 구매하지 않겠다고 하신다면 해당 수량만큼 주문에서 감소됩니다.<br>
이후에는 멤버십 할인 여부에 대해 여쭤볼 것입니다. ```멤버십 할인을 받으시겠습니까? (Y/N)```<br>
멤버십 할인은 프로모션 금액이 적용되기 이전의 30%만큼 할인받으실 수 있습니다. 매 주문마다 최대 8,000원까지 받으실 수 있으며 1,000원 단위로만 적용됩니다.<br>

이후에는 구매가 종료되어, 영수증을 받아보실 수 있습니다. 영수증에서는 총 금액과 할인 금액, 증정품의 개수 등을 확인하실 수 있습니다.<br>
손님께서 나가고 싶어하시기 전까지 저희는 가게 문을 닫지 않으니 ```감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)``` 에 대해 자유롭게 대답해주세요!<br>
즐거운 쇼핑 되세요! 💸

## 용어 사전 📘

- Item : 물리적인 수량의 단위
- Product : 논리적인 상품의 의미
- Inventory : 물류 창고 -> 상품에 대한 아이템들 (수량) 을 갖는 공간

## 가게는 상품과 할인 정보들을 갖고 있다.

- [x] promotions.md 를 저장한다.
- [x] productions.md 를 저장한다.

## 손님이 오면 가게에서는 상품과 할인 정보들을 보여준다

- [x] 다음과 같은 형태로 출력한다.

```
안녕하세요. W편의점입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 10개 탄산2+1
- 콜라 1,000원 10개
```

## 손님은 상품을 구매할 수 있다.

```구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])```

- [x] 잘못된 형태로 입력하는 경우 오류 메시지를 출력한다.
    - [x] [ 로 시작하지 않는 경우
    - [x] ] 로 끝나지 않는 경우
    - [x] 상품명-수량의 형태로 입력하지 않는 경우
    - [x] 상품명에 한글이 아닌 문자가 입력되는 경우
    - [x] 빈 문자열인 경우
    - [x] 수량이 정수가 아닌 경우

- [x] 손님의 주문을 저장한다

### 손님은 품절되지 않은 상품만 구매할 수 있다.

- [x] 구매할 때마다, 결제된 수량만큼 재고에서 차감된다.
- [x] 재고 수량을 매번 확인해서 결제 가능 여부를 확인한다.

### 손님은 프로모션 재고와 기본 재고를 합한 개수의 이하만 구매할 수 있다.

- [x] 프로모션 재고와 기본 재고를 합친 수량보다 많은 수량을 주문하는 경우, 다시 주문을 받는다.

### 손님은 프로모션 할인을 받을 수 있다.

- [x] 프로모션 기간 내에 오늘 날짜가 포함된 경우에만 할인을 적용한다.
- [x] 동일 상품에는 여러 프로모션이 적용되지 않는다.
- [x] 재고 내에서만 진행할 수 있다.
- [x] 프로모션 기간 중에는 해당 재고를 우선적으로 차감하고, 프로모션 재고가 부족하면 일반 재고를 사용한다.
- [x] 프로모션 적용이 가능한 상품에 대해 더 적게 가져오면 필요한 수량을 가져오면 혜택을 받을 수 있음을 안내한다.<br>
  ```현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)```
    - [x] 혜택에 대해 안내받은 뒤에 응답에 따라 수량을 추가하거나 추가하지 않도록 한다
    - [x] 추가적으로 가져와야 하는 수량은 현재 보유하고 있는 프로모션 재고에 따라 결정된다.
        - ex) 사이다가 8개 있는데, 8개를 주문하는 경우에는 추가 수량에 대한 안내를 하지 않는다.
        - ex) 사이다가 8개 있고, 5개를 주문하는 경우에는 추가 수량에 대한 안내를 한다.
- [x] 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제하게 됨을 안내한다.<br>
  ```현재 {상품명} {수량}개는 프로모션 할인이 적용되지 않습니다. 그래도 구매하시겠습니까? (Y/N)```
    - [x] 만약 프로모션 혜택 없이는 결제를 하지 않겠다고 하는 경우, 프로모션이 적용되지 않는 수량만큼을 빼고 주문을 진행한다.

### 손님은 멤버십 할인을 받을 수 있다.

- [x] 프로모션이 적용되지 않은 금액의 30% 를 할인 받는다.
    - [x] 최대 한도는 8000원이다.

## 가게에서는 영수증을 발행한다.

```
==============W 편의점================
상품명		수량	금액
콜라		10 	10,000
=============증	정===============
콜라		2
====================================
총구매액		10	10,000
행사할인			-2,000
멤버십할인			-0
내실돈			 8,000
```

- [x] 구매한 상품과 수량을 계산한다
- [x] 증정 상품과 수량을 계산한다
- [x] 총 구매액을 계산한다.
- [x] 행사 할인 금액을 계산한다.
- [x] 멤버십 할인 금액을 계산한다
- [x] 낼 돈을 계산한다

## 손님은 원할 때 편의점에서 나갈 수 있다.

- [x] 추가 구매 여부를 확인하기 위해 안내 문구를 출력한다.<br>
  ```감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)```
- [x] 나가질 원하지 않는 경우 계속해서 주문을 받는다.
    - 이 때, 구매한 제품들의 수량은 감소시켜 보여줘야 한다.

